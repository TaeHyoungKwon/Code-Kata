import unittest


def _chunks(string: str, n):
    """https://stackoverflow.com/a/312464"""
    for i in range(0, len(string), n):
        yield string[i : i + n]


def encode(string):
    binaries = [format(ord(letter), "08b").replace("b", "") for letter in string]
    return "".join(digit * 3 for binary in binaries for digit in binary)


def decode(string):
    return "".join(
        chr(int("".join(ele), 2)) for ele in _chunks("".join(max(ele, key=ele.count) for ele in _chunks(string, 3)), 8)
    )


class TestEncode(unittest.TestCase):
    def test_encode(self):
        self.assertEqual(
            encode(string="The Sensei told me that i can do this kata"),
            "000111000111000111000000000111111000111000000000000111111000000111000111000000111000000000000000000111000111000000111111000111111000000111000111000111111000111111111000000111111111000000111111000111111000000111000111000111111000111000000111000000111000000000000000000111111111000111000000000111111000111111111111000111111000111111000000000111111000000111000000000000111000000000000000000111111000111111000111000111111000000111000111000000111000000000000000000111111111000111000000000111111000111000000000000111111000000000000111000111111111000111000000000000111000000000000000000111111000111000000111000000111000000000000000000111111000000000111111000111111000000000000111000111111000111111111000000000111000000000000000000111111000000111000000000111111000111111111111000000111000000000000000000111111111000111000000000111111000111000000000000111111000111000000111000111111111000000111111000000111000000000000000000111111000111000111111000111111000000000000111000111111111000111000000000111111000000000000111",
        )


class TestDecode(unittest.TestCase):
    def test_decode(self):
        self.assertEqual(
            decode(string="100111111000111001000010000111111000000111001111000111110110111000010111"), "hey"
        )
